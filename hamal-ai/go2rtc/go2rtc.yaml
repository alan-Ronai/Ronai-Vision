# go2rtc Configuration for HAMAL-AI
# Documentation: https://github.com/AlexxIT/go2rtc
#
# NOTE: Streams are managed dynamically via API by the backend.
# Do NOT add streams manually here - they will be cleared on startup.
# The source of truth for cameras is backend/data/cameras.json

# API configuration
api:
  listen: ":1984"      # Web UI and API port
  origin: "*"          # Allow CORS from any origin (for dev)
  # readonly: false is required for WHIP (browser webcam ingestion)
  readonly: false

# WebRTC configuration
webrtc:
  listen: ":8555"      # WebRTC UDP port
  candidates:
    # IMPORTANT: Replace with your actual EC2 public IP!
    # Run: curl -s ifconfig.me
    - 100.51.235.63:8555
  ice_servers:
    - urls:
        - stun:stun.l.google.com:19302
        - stun:stun1.l.google.com:19302

# RTSP server (allows other apps to pull streams)
rtsp:
  listen: ":8554"      # go2rtc's RTSP output port

# Streams - managed dynamically via API by the backend
streams:
  # Browser webcam stream - EMPTY source accepts WebRTC WHIP input
  # DO NOT add any source here - browser publishes via WebRTC
  browser-webcam: []

# FFmpeg configuration for transcoding (if needed)
ffmpeg:
  bin: ffmpeg          # Path to ffmpeg binary

# Logging
log:
  level: info          # debug, info, warn, error
